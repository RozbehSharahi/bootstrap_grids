#!/bin/bash

set -e

if [[ -f .docker/bin/.env ]]; then
  set -a # Automatically export all variables to the shell
  source .docker/bin/.env
  set +a
fi

echo "
Environment...
  $(if [[ ${TYPO3} ]] ;    then echo 'TYPO3:   ' ${TYPO3}; else echo 'TYPO3: Not set'; fi)
  $(if [[ ${PHP} ]] ;      then echo 'PHP:     ' ${PHP};   else echo 'PHP: Not set'; fi)
  $(if [[ ${PASSWORD} ]] ; then echo 'PASSWORD: ********'; else echo 'PASSWORD: Not set'; fi)
"

docker compose -f .docker/docker-compose.base.yml -f .docker/docker-compose.php"${PHP:-8.1}".yml "$@"
